# 即时通讯系统 IM Demo

本项目旨在提供一个即时通信系统示例，为同学们提供一种可行的设计思路和实现路径，帮助同学们克服大作业中的难点，加深对即时通信系统的理解。

## 项目结构

本项目分为两个子项目：

* [server](server/): 后端部分，基于 Django 实现。
* [client](client/): 前端部分，基于 Next.js 实现。

每个部分都采用了大作业推荐的技术栈，并实现了文档中提及的核心功能。

## 功能说明

本项目根据网络学堂下发的《即时通信系统 消息系统示例》文档实现了 Phase 1 的内容，分为以下三个层级：

### Level 1: 基本的消息收发 (已完成)

- 描述：所有用户共享一个大型聊天室，可以实现基本的消息收发功能。此阶段尚未引入会话概念。
- 支持操作：
  - 切换用户：用户可以在不同账号间切换，体验不同视角。
  - 收发消息：用户能够在公共聊天室中发送和接收消息。

### Level 2: 多会话聊天 (已完成)

- 描述：引入了会话概念，支持用户间进行私聊和群聊。通过**写分发**机制维护用户消息链，确保实时聊天的高效性。
- 支持操作：
  - 创建私聊：用户可以与其他用户建立私人会话。
  - 创建群聊：用户可以创建群组，实现群聊。
  - 切换会话：用户可以在不同的会话间切换，查看不同会话的消息历史。

### Level 3: 会话历史消息 (已完成)

- 描述：针对加入群组的用户无法查看加入前历史消息的问题，维护会话消息链，当用户加入群聊时，会触发会话历史消息的拉取，使新成员也能查看之前的对话。
- 支持操作：
  - 加群：用户可以加入已存在的群聊，开始接收新消息并查看加群后的历史消息。
  - 退群：用户可以选择退出群聊，不再接收该群聊的消息。


我们为每个层级的实现打上了 `level1, level2, level3` 的 tag，可以通过以下命令查看不同阶段的实现逻辑：

```bash
git switch -c level{X} # 将 {X} 替换为 1/2/3 
```

## 注意事项

1. 本项目作为一个示例Demo，旨在提供一种可能的技术实现参考。为了集中展示核心功能，我们简化了一些工程实践，包括：

    * 将前端和后端代码放置于同一仓库，以方便查看和管理，而在实际项目中，您需要将它们分开以便独立开发和部署。
    * 没有集成CI/CD流程和单元测试，没有提供Docker配置，而这在大作业中是必要的。

    如果您打算将本项目的代码应用到自己的项目上，请务必注意课程关于项目规范方面的要求。

2. 尽管我们提供了一套可行的设计和实现思路，但这不意味着它是唯一的或最佳的实践。我们鼓励大家将此项目作为一个参考，进行自主的探索和创新，形成适合自己的解决方案。

3. 项目代码中可能存在一些潜在的bug和未优化的部分，希望大家理解，如果发现有问题还请不吝指出。